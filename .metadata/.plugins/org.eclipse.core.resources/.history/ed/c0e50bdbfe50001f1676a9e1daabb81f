package com.monocept.app.service;

import java.util.List;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.stereotype.Service;

import com.monocept.app.dto.EmployeeDto;
import com.monocept.app.entity.Blog;
import com.monocept.app.entity.Employee;
import com.monocept.app.exception.BlogNotFoundException;
import com.monocept.app.exception.EmployeeNotFoundException;
import com.monocept.app.repository.BlogRepository;
import com.monocept.app.util.PagedResponse;

@Service
public class BlogServiceImpl implements BlogService {
	private BlogRepository blogRepository;
	

	public BlogServiceImpl(BlogRepository blogRepository) {
		super();
		this.blogRepository = blogRepository;
	}


	@Override
	public PagedResponse<Blog> getAllBlog(int page, int size, String sortBy, String direction) {
		Sort sort = direction.equalsIgnoreCase(Sort.Direction.DESC.name()) ? Sort.by(sortBy).descending() : Sort.by(sortBy).ascending();
		Pageable pageable=PageRequest.of(page, size,sort);
		Page<Blog> page1=blogRepository.findAll(pageable);
		
		List<Blog> blog=page1.getContent();
		if(blog.isEmpty())
		{
			throw new BlogNotFoundException("blog not Found");
			
		}
		
//		public PagedResponse<EmployeeDto> getAllEmployees(int page,int size,String sortBy,String direction) {
//			Sort sort = direction.equalsIgnoreCase(Sort.Direction.DESC.name()) ? Sort.by(sortBy).descending() : Sort.by(sortBy).ascending();
//			Pageable pageable=PageRequest.of(page, size,sort);
//			Page<Employee> page1=employeerepository.findAll(pageable);
//			
//			
//			List<Employee> employee= page1.getContent();
//			if(employee.isEmpty()) {
//				throw new EmployeeNotFoundException("Employee  is not found");
//			}
//			List<EmployeeDto> employeesDTO=ConvertemployeeDtoToObjectList(page1.getContent());
//			return new PagedResponse<EmployeeDto>(employeesDTO, page1.getNumber(), page1.getSize(), page1.getTotalElements(),page1.getTotalPages(),page1.isLast());
//
//	}
	}
}
